<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio | VOG WAVE Design Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600&family=Outfit:wght@200;300;400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <style>
        .portfolio-hero {
            padding: calc(var(--header-height) + 4rem) 0 3rem;
            text-align: center;
            background: linear-gradient(180deg, #050505, var(--bg-dark));
        }

        .portfolio-hero h1 {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            margin-bottom: 1rem;
        }

        .portfolio-hero p {
            max-width: 550px;
            margin: 0 auto 2rem;
        }

        .filter-buttons {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: 1px solid var(--border-dark);
            color: var(--text-muted);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: var(--transition);
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--accent-gold);
            border-color: var(--accent-gold);
            color: #000;
        }

        /* Portfolio Grid */
        .portfolio-full-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 4px;
            padding: 4px;
            background: #000;
        }

        .portfolio-full-grid .portfolio-card {
            aspect-ratio: 1/1;
        }

        /* Video Section */
        .video-section {
            background: #050505;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
            gap: 2rem;
        }

        .video-card {
            background: var(--bg-card);
            border: 1px solid var(--border-dark);
            border-radius: 4px;
            overflow: hidden;
            transition: var(--transition);
        }

        .video-card:hover {
            border-color: var(--text-gold);
            transform: translateY(-5px);
        }

        .video-card video {
            width: 100%;
            height: 280px;
            object-fit: cover;
            background: #000;
        }

        .video-card .video-info {
            padding: 1.5rem;
        }

        .video-card h4 {
            color: #fff;
            margin-bottom: 0.5rem;
        }

        .video-card p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin: 0;
        }

        @media (max-width: 1200px) {
            .portfolio-full-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 800px) {
            .portfolio-full-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .video-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 500px) {
            .portfolio-full-grid {
                grid-template-columns: 1fr;
            }

            .portfolio-full-grid .portfolio-card {
                aspect-ratio: 4/3;
            }
        }

        /* Custom Lightbox with Swipe Navigation */
        .custom-lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.97);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .custom-lightbox.active {
            display: flex;
        }

        .custom-lightbox img {
            max-width: 90%;
            max-height: 85%;
            object-fit: contain;
            border: 2px solid var(--accent-gold);
            box-shadow: 0 0 80px rgba(0, 0, 0, 0.8);
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 3rem;
            color: #fff;
            cursor: pointer;
            z-index: 10001;
            transition: color 0.3s;
        }

        .lightbox-close:hover {
            color: var(--text-gold);
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3rem;
            color: #fff;
            cursor: pointer;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 4px;
            transition: 0.3s;
            user-select: none;
            z-index: 10001;
        }

        .lightbox-nav:hover {
            background: var(--accent-gold);
            color: #000;
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }

        .lightbox-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 1rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="index.html" class="logo">
                <img src="assets/logo.jpg" alt="VOG WAVE Design Studio">
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="portfolio.html" class="active">Portfolio</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <div class="nav-actions">
                <button class="theme-toggle" id="themeToggle">â˜€</button>
                <a href="contact.html" class="btn btn-primary">Let's Talk</a>
            </div>
            <div class="mobile-toggle" id="mobileToggle">
                <span></span><span></span><span></span>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="portfolio-hero">
        <div class="container">
            <h1 class="text-gold">Our Portfolio</h1>
            <p>A complete collection of 70+ high-end architectural visualizations and walkthrough animations.</p>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="exterior">Exterior</button>
                <button class="filter-btn" data-filter="interior">Interior</button>
                <button class="filter-btn" data-filter="commercial">Commercial</button>
                <button class="filter-btn" data-filter="animation">Animation</button>
            </div>
        </div>
    </section>

    <!-- Portfolio Grid -->
    <section class="portfolio-full-grid" id="portfolioGrid">
        <!-- Dynamic content loaded via JS -->
    </section>

    <!-- Videos Section -->
    <section class="video-section section-padding">
        <div class="container">
            <h2 class="text-center">3D Walkthroughs & Animations</h2>
            <p class="text-center" style="max-width: 500px; margin: 0 auto 3rem;">Cinematic architectural animations for
                real estate marketing.</p>

            <div class="video-grid">
                <!-- Video 1 -->
                <div class="video-card">
                    <video controls poster="assets/images/render12.jpg">
                        <source src="assets/videos/1.mp4" type="video/mp4">
                        Your browser does not support video.
                    </video>
                    <div class="video-info">
                        <h4>House Animation 1</h4>
                        <p>Exterior walkthrough animation</p>
                    </div>
                </div>

                <!-- Video 2 -->
                <div class="video-card">
                    <video controls poster="assets/images/render21.jpg">
                        <source src="assets/videos/2.mp4" type="video/mp4">
                        Your browser does not support video.
                    </video>
                    <div class="video-info">
                        <h4>House Animation 2</h4>
                        <p>Interior walkthrough animation</p>
                    </div>
                </div>

                <!-- Ad Video - Will be added when you put ad.mp4 in videos folder -->
                <div class="video-card" id="adVideo" style="display: none;">
                    <video controls poster="assets/images/render40.jpg">
                        <source src="assets/videos/ad.mp4" type="video/mp4">
                        Your browser does not support video.
                    </video>
                    <div class="video-info">
                        <h4>VOG WAVE Studio Ad</h4>
                        <p>Promotional video</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-col">
                <h3>VOG WAVE.</h3>
                <p>Premium architectural visualization studio by Ali Hamza.</p>
            </div>
            <div class="footer-col">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="portfolio.html">Portfolio</a></li>
                    <li><a href="services.html">Services</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Contact</h4>
                <p>WhatsApp: 0314-0735267</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 VOG WAVE Design Studio. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- WhatsApp Float -->
    <a href="https://wa.me/923140735267" class="whatsapp-float" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
            <path
                d="M12.0041 2C6.48624 2 1.99609 6.49015 1.99609 12.008C1.99609 13.7917 2.4706 15.4853 3.32427 16.9737L2 22L7.2023 20.671C8.63666 21.5281 10.2825 22.016 12.0041 22.016C17.5219 22.016 22.0121 17.5259 22.0121 12.008C22.0121 6.49015 17.5219 2 12.0041 2ZM12.0041 20.216C10.5186 20.216 9.10373 19.8053 7.87324 19.0831L7.56846 18.9042L4.60677 19.6644L5.38541 16.7118L5.19532 16.398C4.39704 15.1118 3.97216 13.5932 3.97216 12.008C3.97216 7.57917 7.57527 3.97606 12.0041 3.97606C16.4329 3.97606 20.036 7.57917 20.036 12.008C20.036 16.4369 16.4329 20.216 12.0041 20.216ZM16.3943 14.5826C16.1493 14.4571 14.9497 13.8587 14.7292 13.7706C14.5087 13.6826 14.3496 13.6385 14.1905 13.8835C14.0314 14.1285 13.5781 14.6823 13.4433 14.8458C13.3086 15.0093 13.1738 15.0219 12.9288 14.8964C12.6838 14.7708 11.8943 14.5064 10.958 13.6554C10.2224 12.9868 9.72517 12.1611 9.5782 11.9032C9.43122 11.6453 9.56276 11.5061 9.6853 11.3813C9.79555 11.269 9.93033 11.0892 10.0528 10.9383C10.1754 10.7874 10.2121 10.6868 10.2979 10.5108C10.3836 10.3347 10.3347 10.1838 10.2734 10.0581C10.2121 9.9324 9.73444 8.73815 9.53856 8.24796C9.34268 7.78287 9.1468 7.84572 9.01211 7.84572C8.88957 7.84572 8.74261 7.83315 8.59564 7.83315C8.44868 7.83315 8.20377 7.89601 7.99547 8.12228C7.78718 8.34854 7.19934 8.91421 7.19934 10.0706C7.19934 11.227 8.03208 12.3584 8.15461 12.5218C8.27715 12.6853 9.8109 15.1118 12.2373 16.143C14.6637 17.1742 14.6637 16.8346 15.0924 16.7844C15.5211 16.7341 16.48 16.1932 16.676 15.6275C16.872 15.0618 16.872 14.5842 16.8107 14.4836C16.7495 14.383 16.5905 14.3195 16.3943 14.2882V14.5826Z">
            </path>
        </svg>
    </a>

    <!-- Custom Lightbox with Swipe Navigation -->
    <div class="custom-lightbox" id="lightbox">
        <span class="lightbox-close" id="lightboxClose">&times;</span>
        <span class="lightbox-nav lightbox-prev" id="lightboxPrev">&#10094;</span>
        <img src="" alt="Portfolio Image" id="lightboxImg">
        <span class="lightbox-nav lightbox-next" id="lightboxNext">&#10095;</span>
        <div class="lightbox-counter"><span id="currentIndex">1</span> / <span id="totalCount">70</span></div>
    </div>

    <script src="script.js"></script>
    <script>
        // =============================================
        // DYNAMIC PORTFOLIO - ALL 70 IMAGES
        // =============================================

        // All image files in assets/images folder
        const allImages = [
            // JPG Renders (render1 to render40)
            ...Array.from({ length: 40 }, (_, i) => ({ src: `assets/images/render${i + 1}.jpg`, ext: 'jpg' })),

            // PNG Renders (render_png1 to render_png19)
            ...Array.from({ length: 19 }, (_, i) => ({ src: `assets/images/render_png${i + 1}.png`, ext: 'png' })),

            // Scene images
            { src: 'assets/images/Scene 10.png', ext: 'png' },
            { src: 'assets/images/Scene 14.png', ext: 'png' },
            { src: 'assets/images/Scene 16.png', ext: 'png' },
            { src: 'assets/images/Scene 17.png', ext: 'png' },
            { src: 'assets/images/Scene 18.png', ext: 'png' },
            { src: 'assets/images/Scene 19.png', ext: 'png' },
            { src: 'assets/images/Scene 20.png', ext: 'png' },
            { src: 'assets/images/Scene 21.png', ext: 'png' },

            // render41 and 1.jpg
            { src: 'assets/images/render41.png', ext: 'png' },
            { src: 'assets/images/1.jpg', ext: 'jpg' },
        ];

        // Assign categories
        const categories = ['exterior', 'interior', 'commercial'];

        // Render portfolio grid
        const grid = document.getElementById('portfolioGrid');

        allImages.forEach((img, index) => {
            const category = categories[index % 3];
            const card = document.createElement('div');
            card.className = 'portfolio-card';
            card.dataset.category = category;
            card.innerHTML = `
                <img src="${img.src}" alt="Render ${index + 1}" loading="lazy" onerror="this.parentElement.style.display='none'">
                <div class="overlay">
                    <h4>Project ${index + 1}</h4>
                    <span>${category.charAt(0).toUpperCase() + category.slice(1)}</span>
                </div>
            `;
            grid.appendChild(card);
        });

        // Filter functionality
        const filterBtns = document.querySelectorAll('.filter-btn');
        const videoSection = document.querySelector('.video-section');
        const portfolioGrid = document.getElementById('portfolioGrid');

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const filter = btn.dataset.filter;

                // If Animation filter is clicked
                if (filter === 'animation') {
                    // Hide images grid, show videos
                    portfolioGrid.style.display = 'none';
                    videoSection.style.display = 'block';
                    // Scroll to video section
                    videoSection.scrollIntoView({ behavior: 'smooth' });
                } else {
                    // Show images grid, keep videos visible
                    portfolioGrid.style.display = 'grid';

                    document.querySelectorAll('.portfolio-card').forEach(card => {
                        if (filter === 'all' || card.dataset.category === filter) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                }
            });
        });

        // Check for ad video
        const adVideo = document.getElementById('adVideo');
        const adVideoSrc = adVideo.querySelector('source');

        // Try to load ad video - if exists, show the card
        fetch('assets/videos/ad.mp4', { method: 'HEAD' })
            .then(response => {
                if (response.ok) {
                    adVideo.style.display = 'block';
                }
            })
            .catch(() => { });

        // =============================================
        // LIGHTBOX WITH SWIPE NAVIGATION
        // =============================================

        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxClose = document.getElementById('lightboxClose');
        const lightboxPrev = document.getElementById('lightboxPrev');
        const lightboxNext = document.getElementById('lightboxNext');
        const currentIndexEl = document.getElementById('currentIndex');
        const totalCountEl = document.getElementById('totalCount');

        let allPortfolioImages = [];
        let currentImageIndex = 0;

        // Initialize lightbox after images are loaded
        setTimeout(() => {
            allPortfolioImages = Array.from(document.querySelectorAll('.portfolio-full-grid img'));
            totalCountEl.textContent = allPortfolioImages.length;

            allPortfolioImages.forEach((img, index) => {
                img.style.cursor = 'pointer';
                img.addEventListener('click', () => {
                    openLightbox(index);
                });
            });
        }, 200);

        function openLightbox(index) {
            currentImageIndex = index;
            updateLightboxImage();
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }

        function updateLightboxImage() {
            if (allPortfolioImages[currentImageIndex]) {
                lightboxImg.src = allPortfolioImages[currentImageIndex].src;
                currentIndexEl.textContent = currentImageIndex + 1;
            }
        }

        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % allPortfolioImages.length;
            updateLightboxImage();
        }

        function prevImage() {
            currentImageIndex = (currentImageIndex - 1 + allPortfolioImages.length) % allPortfolioImages.length;
            updateLightboxImage();
        }

        // Event Listeners
        lightboxClose.addEventListener('click', closeLightbox);
        lightboxNext.addEventListener('click', nextImage);
        lightboxPrev.addEventListener('click', prevImage);

        // Close on background click
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) closeLightbox();
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (!lightbox.classList.contains('active')) return;

            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowRight') nextImage();
            if (e.key === 'ArrowLeft') prevImage();
        });

        // Swipe support for mobile
        let touchStartX = 0;
        let touchEndX = 0;

        lightbox.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        lightbox.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;

            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    nextImage(); // Swipe left = next
                } else {
                    prevImage(); // Swipe right = prev
                }
            }
        }
    </script>
    <!-- Supabase Integration -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script>
        // Supabase Dynamic Portfolio Loading
        document.addEventListener('DOMContentLoaded', async () => {
            // Only run if Supabase is actually configured
            if (typeof getPortfolioItems === 'function' && typeof isSupabaseConfigured === 'function' && isSupabaseConfigured()) {
                const grid = document.querySelector('.portfolio-full-grid');
                if (!grid) return;

                // Show loading indicator
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: #888; padding: 2rem;">Loading projects from database...</div>';

                const { data: items, error } = await getPortfolioItems();

                if (items && items.length > 0) {
                    grid.innerHTML = ''; // Clear loading

                    items.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'portfolio-card';
                        div.dataset.category = item.category || 'exterior';
                        div.style.display = 'block'; // Ensure visible initially
                        div.innerHTML = `
                             <img src="${item.image_url}" alt="${item.title}" loading="lazy">
                             <div class="overlay">
                                 <h3>${item.title}</h3>
                                 <span>${item.category}</span>
                             </div>
                         `;
                        grid.appendChild(div);
                    });

                    // Re-initialize lightbox since we replaced the DOM elements
                    setTimeout(() => {
                        // Re-bind lightbox
                        allPortfolioImages = Array.from(document.querySelectorAll('.portfolio-full-grid img'));
                        if (document.getElementById('totalCount')) document.getElementById('totalCount').textContent = allPortfolioImages.length;

                        allPortfolioImages.forEach((img, index) => {
                            img.style.cursor = 'pointer';
                            img.onclick = () => openLightbox(index);
                        });

                        // Re-apply current filter
                        const activeBtn = document.querySelector('.filter-btn.active');
                        if (activeBtn) activeBtn.click();

                    }, 500);
                } else {
                    // If no items in DB, maybe fallback or show empty
                    if (!error) grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: #888; padding: 2rem;">No projects found. Add them via Admin Panel.</div>';
                }
            }
        });
    </script>
</body>

</html>